{% extends "base.html" %}

{% block imports %}
{% assets filters="cssmin", output="gen/grades-bundle.css", "css/base.css", "css/grades.css" %}
<link rel="stylesheet" href="{{ ASSET_URL }}">
{% endassets %}

{% assets filters="rjsmin", output="gen/grades.min.js", "js/grades.js" %}
<script defer src="{{ ASSET_URL }}"></script>
{% endassets %}
{% endblock %}

{% block title %}Notes du semestre {{ semester }}{% endblock %}

{% block main %}


<div class="top-container">
    <div>
        <div>
            <div>
                <div>
                    <span>Moyenne générale</span>
                    <span id="moyenneGeneral">14.87<span>pts</span></span>
                </div>
                <span>Rang : <b id="rank">8/80</b></span>
            </div>
        </div>

    </div>
    <div>
        <div>
            <a href="/pdf_dl?sem=TBFS1T" class="pill-btn material-symbols-outlined">file_download</a>
        </div>
        <div>
            <a href="/static/lib/web/viewer.html?file=%2Fpdf_dl%3Fsem%3DTBFS1T"
                class="pill-btn material-symbols-outlined">plagiarism</a>
        </div>
        <div>
            <input onclick="toggleEmpty()" type="checkbox" id="hide">
            <label for="hide" class="material-symbols-outlined">visibility</label>
            <label for="hide" class="material-symbols-outlined">visibility_off</label>
        </div>
        <div>

        </div>

    </div>

</div>

    {% if pdf_data["admission"] or pdf_data["average"] or pdf_data["position"] %}
    <ul class="header-data">
        {% if pdf_data["admission"] %}
        <li>Résultat d'admission&nbsp;: <b>{{ pdf_data["admission"] }}</b></li>
        {% endif %}

        {% if pdf_data["average"] %}
        <li>Moyenne générale&nbsp;: <b>{{ pdf_data["average"] }}</b></li>
        {% endif %}

        {% if pdf_data["position"] %}
        <li>Position dans le classement&nbsp;: <b>{{ pdf_data["position"] }}</b></li>
        {% endif %}
    </ul>
    {% endif %}

    <ul class="grades">
        {% for sub in pdf_data["grades"] %}
        <li class="{{ sub['empty'] }}">
            <h2>{{ sub["name"] }}</h2>
            <p>Prof : <em>{{ sub["teacher"] }}</em></p>
            <p>Moyenne : {{ sub["average"] }}</p>
            <table>
                <tbody>
                    {% for grade in sub["grades"] %}
                    <tr>
                        <td>{{ grade[0] }}</td>
                        {% if grade[1]|length > 1 %}
                        {# grade + coef #}
                        <td>{{ grade[1][0] }} <sub>coef.&nbsp;{{ grade[1][1] }}</sub></td>
                        {% else %}
                        {# no grade #}
                        <td>{{ grade[1][0] }}</td>
                        {% endif %}
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </li>
        {% endfor %}
    </ul>
    {% endblock %}